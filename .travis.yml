os: linux
services: docker
dist: jammy
language: go
go:
  - 1.20.x
go_import_path: github.com/noironetworks/aci-containers

env:
  global:
  - DEFAULT_BRANCH: kmr2
  - GOPROXY: https://proxy.golang.org,https://goproxy.io,direct

before_script:
- export DOCKER_BUILDKIT=1

script:
- docker login -u=$QUAY_SUMIT_NOIROLABS_ROBO_USER -p=$QUAY_SUMIT_NOIROLABS_ROBO_PSWD quay.io
- docker/centos/build-opflex-travis.sh
- docker images
  #- make -C . all-static
  #- docker/copy_iptables.sh docker.io/challa/opflex-build-base:ubi9-ubuntu dist-static
  #- docker build -t quay.io/noirolabs/cnideploy:sumit-kmr2-test --file=docker/travis/Dockerfile-cnideploy .
  #- docker images
  #- docker build -t quay.io/noirolabs/aci-containers-controller:sumit-kmr2-test --file=docker/travis/Dockerfile-controller .
  #- docker images
  #- docker build -t quay.io/noirolabs/aci-containers-host:sumit-kmr2-test --file=docker/travis/Dockerfile-host .
  #- docker images
  ##- docker build -t quay.io/noirolabs/openvswitch:sumit-kmr2-test --file=docker/travis/Dockerfile-openvswitch .
  ##- docker images
  #- docker build -t quay.io/noirolabs/aci-containers-operator:sumit-kmr2-test --file=docker/travis/Dockerfile-operator .
  #- docker images
  #- docker login -u=$QUAY_SUMIT_NOIROLABS_ROBO_USER -p=$QUAY_SUMIT_NOIROLABS_ROBO_PSWD quay.io
  #- docker push quay.io/noirolabs/cnideploy:sumit-kmr2-test
  #- docker push quay.io/noirolabs/aci-containers-controller:sumit-kmr2-test
  #- docker push quay.io/noirolabs/aci-containers-host:sumit-kmr2-test
  ##- docker push quay.io/noirolabs/openvswitch:sumit-kmr2-test
  #- docker push quay.io/noirolabs/aci-containers-operator:sumit-kmr2-test
