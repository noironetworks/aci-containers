os: linux
services: docker
dist: jammy
language: go
go:
  - 1.20.x
go_import_path: github.com/noironetworks/aci-containers

env:
  global:
  - DEFAULT_BRANCH: kmr2
  - GOPROXY: https://proxy.golang.org,https://goproxy.io,direct

before_script:
- export DOCKER_BUILDKIT=1

#$TRAVIS_PULL_REQUEST_BRANCH
script:
- docker build --build-arg basetag=kmr2-test -t quay.io/noirolabs/cnideploy:sumit-kmr2-test --file=docker/Dockerfile-cnideploy .
- docker images
- docker build --build-arg basetag=kmr2-test -t quay.io/noirolabs/aci-containers-controller:sumit-kmr2-test --file=docker/Dockerfile-controller .
- docker images
- docker build --build-arg basetag=kmr2-test -t quay.io/noirolabs/aci-containers-host:sumit-kmr2-test --file=docker/Dockerfile-host .
- docker images
- docker build --build-arg basetag=kmr2-test -t quay.io/noirolabs/openvswitch:sumit-kmr2-test --file=docker/Dockerfile-openvswitch .
- docker images
- docker build --build-arg basetag=kmr2-test -t quay.io/noirolabs/aci-containers-operator:sumit-kmr2-test --file=docker/Dockerfile-operator .
- docker images
